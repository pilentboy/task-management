(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const b=document.querySelector("#loading"),c=document.querySelector(".container");window.addEventListener("load",()=>{v(),setTimeout(()=>{localStorage.getItem("username")?w():k(),b==null||b.remove(),h()},1)});window.addEventListener("resize",()=>{h(),v()});const h=()=>{const t=document.querySelector("#welcomeMessage");t&&(window.innerWidth<640?t.textContent="به اپ برنامه ریزی خودت خوش اومدی":t.textContent="با این اپلیکیشن میتونی به سادگی واسه اهدافت برنامه ریزی کنی")},v=()=>{if(document.querySelector("#starsContainer")){let s=document.querySelector("#starsContainer");s==null||s.remove()}const t=document.createElement("div");t.setAttribute("id","starsContainer"),t.classList.add("w-screen","h-screen","top-0","left-0","fixed","z-[-1]","px-10");const e=10;for(let s=0;s<=e;s++){const n=document.createElement("span");n.classList.add("star","absolute");const r=Math.floor(Math.random()*window.innerWidth+50),o=Math.floor(Math.random()*window.innerHeight+50);n.style.left=`${r}px`,n.style.top=`${o}px`,t.append(n)}c==null||c.append(t),console.log("stars rendered")},g=(t,e,s=null)=>{const n=document.createElement("h2");return n.textContent=e,s&&n.setAttribute("id",s),t.forEach(r=>{n.classList.add(r)}),n},N=()=>{const t=document.createElement("form");t.setAttribute("action","#"),t.setAttribute("id","registerForm"),t.addEventListener("submit",r=>S(r));const e=document.createElement("div");e.classList.add("flex","flex-col","mx-auto","w-full","items-center","justify-center","gap-3","sm:flex-row","mt-5"),t.append(e);const s=document.createElement("input");s.setAttribute("id","usernameInput"),s.setAttribute("name","username"),s.setAttribute("placeholder","نام کاربری"),s.classList.add("outline-none","w-80","px-4","py-4","rounded-md","border-[2px]","duration-200","text-white","bg-transparent","placeholder:text-sm","hover:border-slate-800","focus:border-slate-800"),e.append(s);const n=document.createElement("button");return n.textContent="ورود",n.classList.add("p-4","text-white","border-[2px]","rounded-md","relative","animation-btn","overflow-hidden"),e.append(n),t},k=()=>{const t=document.createElement("div");t.setAttribute("id","welcomingContainer"),t.classList.add("w-full","px-2","fixed","top-1/2","left-1/2","translate-x-[-50%]","translate-y-[-50%]","flex","items-center","flex-col"),t.append(g(["text-3xl","text-slate-500","text-center","px-2","animate-bounce"],"","welcomeMessage")),t.append(g(["text-white","text-2xl","text-center","shadow-slate-900","shadow-lg","my-10"]," برای شروع فقط کافیه یه اسم واسه حسابت وارد کنی")),t.append(N()),c==null||c.append(t)},S=t=>{t.preventDefault();const e=document.querySelector("#usernameInput");if(e&&e.value.length>1&&e.value.length<=30){const s=document.querySelector("#welcomingContainer");localStorage.setItem("username",JSON.stringify(e.value)),s==null||s.classList.add("animation-remove"),setTimeout(()=>{s==null||s.remove(),w()},2e3)}else e==null||e.classList.add("border-red-500")},C=()=>{const t=document.querySelector("#addTaskBox"),e=document.createElement("form");e.className="z-[999]",e.id="addNewList";const s=document.createElement("div");e.append(s),s.className="absolute top-0 left-0 flex flex-col gap-2 items-center justify-center backdrop-blur-lg	 w-full h-full ";const n=document.createElement("input");n.className="w-3/4 p-2 outline-none bg-transparent text-white border-slate-400 focus:border-slate-800 duration-150 border rounded-md placeholder:text-sm",n.placeholder="نام دسته ی جدید...",n.id="addListInput",s.append(n),s.append(L(E(()=>{e.remove()}),y("addNewList"))),e.addEventListener("submit",r=>{if(r.preventDefault(),n.value.length>0){const o=localStorage.getItem("tasks"),d=o?JSON.parse(o):null;d.push({[n==null?void 0:n.value]:[]}),localStorage.setItem("tasks",JSON.stringify(d)),console.log("done")}else n.classList.remove("border-slate-400"),n.classList.add("border-red-500")}),t==null||t.append(e)},w=()=>{const t=document.createElement("div");t.id="addTaskBox",t.className="w-[90%] flex flex-col	items-center justify-center fixed top-1/2 left-1/2 duration-300	 translate-x-[-50%] translate-y-[-50%]  h-48 border-2 p-4 rounded-md border-slate-900 overflow-hidden sm:w-48";const e=document.createElement("img");e.id="taskBoxToggler",e.src="/task-management/svg/setting-svgrepo-com.svg",e.className="duration-500  shadow-xl  animate-pulse cursor-pointer absolute top-1/2 left-1/2 translate-x-[-50%] translate-y-[-50%]",e.addEventListener("click",()=>{e.classList.add("rotate-90","animation-remove"),setTimeout(()=>{t.classList.remove("w-48","h-48"),t.classList.add("sm:w-96","h-64","justify-start","items-start"),t.append(A())},950)}),t.append(e),c==null||c.append(t)},A=()=>{const t=document.createElement("form");t.setAttribute("id","addTaskForm"),t.className="w-full";const e=document.createElement("div");e.id="formContainer",e.className="flex flex-col gap-2",t.append(e);const s=localStorage.getItem("username"),n=s?JSON.parse(s):null,r=document.createElement("label");r.setAttribute("for","taskInput"),r.className="text-white font-2xl animate-type ",r.textContent=`سلام ${n}!  هدفت چیه؟`,e.append(r);const o=document.createElement("input");o.className="w-[90%] p-2 outline-none bg-transparent text-white border-slate-400 hover:border-slate-800 focus:border-slate-800 duration-150 border rounded-md placeholder:text-sm",o.placeholder="هدفم...",o.setAttribute("id","taskInput"),e.append(o);const d=document.createElement("label");d.textContent="تو کدوم دسته؟",d.className="text-white text-sm",d.setAttribute("for","tasksList"),e.append(d);const u=document.createElement("div");u.className="flex items-center gap-1";const i=document.createElement("select");i.name="taskList",i.id="tasksList",i.className="w-1/2 p-1 bg-transparent cursor-pointer text-white border-slate-400 border hover:border-slate-800 focus:border-slate-800 duration-150  outline-none rounded-md";const x=localStorage.getItem("tasks")||null;if(x){const a=JSON.parse(x);let l=[];a.forEach(p=>{l.push(Object.keys(p)[0])}),l.forEach(p=>{const f=document.createElement("option");f.value=p,f.textContent=p,f.className="border-slate-400 bg-transparent  text-black hover:border-slate-800 focus:border-slate-800 duration-150 ",i.append(f)})}else{const a=document.createElement("option");a.value="وظایفم",a.textContent="وظایفم",a.className="border-slate-400 bg-transparent  hover:border-slate-800 focus:border-slate-800 duration-150 ",i.append(a)}u.append(i);const m=document.createElement("button");return m.setAttribute("type","button"),m.className="py-1 px-3 border-none text-white text-lg",m.textContent="+",m.addEventListener("click",C),u.append(m),e.append(u),e.append(L(E(()=>{t.remove();const a=document.querySelector("#taskBoxToggler"),l=document.querySelector("#addTaskBox");a==null||a.classList.remove("animation-remove"),l==null||l.classList.remove("sm:w-96","h-64","justify-start","items-start"),l==null||l.classList.add("w-48","h-48")}),y("submitTaskBTN"))),t.addEventListener("submit",a=>{a.preventDefault(),T(o.value,i.value),o.value=""}),t.append(e),t},T=(t,e)=>{const s=localStorage.getItem("tasks");if(s){const n=JSON.parse(s);n.forEach(r=>{if(Object.keys(r)[0]===e){const o=r[e];o.push(t.trim()),r[e]=o,localStorage.setItem("tasks",JSON.stringify(n))}})}else localStorage.setItem("tasks",JSON.stringify([{وظایفم:[t.trim()]}]))},y=t=>{const e=document.createElement("button");return e.textContent="افزودن",e.className="self-center px-6 py-2 animation-btn text-white outline-none border border-slate-900 rounded-md duration-150 relative overflow-hidden ",e.setAttribute("id",t),e},L=(t,e)=>{const s=document.createElement("div");return s.className="w-full flex items-center justify-center gap-10 mt-4",s.append(t),s.append(e),s},E=t=>{const e=document.createElement("button");e.type="button";const s=document.createElement("img");return s.src="/task-management/svg/close-square-svgrepo-com.svg",s.className="w-10 h-10",e.append(s),e.addEventListener("click",t),e};
